<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>🥚 계란을 구해라!</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="effect-overlay"></div>
        
        <button class="audio-btn" onclick="toggleAudio()" id="audioBtn">🔊</button>

        <!-- In-Game UI -->
        <div id="inGameUI" class="ui-layer hidden">
            <!-- Score is now on the basket, Hearts are replaced by Cages on ground -->
            <div id="comboUI" class="combo-box">
                <span class="combo-text"><span id="comboVal">0</span> COMBO!</span>
            </div>
            <div style="flex-grow: 1;"></div> <!-- Spacer -->
        </div>

        <!-- Start Screen -->
        <div id="startScreen" class="screen">
            <h1 class="mb-4">🥚 계란을 구해라!</h1>
            
            <div class="egg-info text-center p-0" style="background: transparent; box-shadow: none;">
                <img src="images/infographic.jpg" class="img-fluid mb-3 shadow-sm" alt="난각번호 설명 인포그래픽" style="border-radius: 15px; width: 90%;">
            </div>

            <div class="mt-4 mb-4">
                <p class="fs-5 mb-4"><strong>🎯 게임 목표</strong></p>
                <p>행복한 <strong>1번, 2번 달걀</strong>만 바구니에 담아주세요!</p>
                <p class="small text-danger">3, 4번 달걀과 폭탄은 피해야 해요! 자석은..</p>
            </div>

            <button class="btn btn-warning btn-lg btn-start rounded-pill fw-bold shadow-sm" style="min-width: 200px; width: auto;" onclick="startGame()">게임 시작</button>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen hidden">
            <div id="gameOverUI" class="w-100 d-flex flex-column align-items-center">
                <h2>게임 종료!</h2>
                <p class="fs-4">최종 점수: <span id="finalScore" class="text-warning fw-bold">0</span></p>
                
                <div class="mb-3 w-100" style="max-width: 300px;">
                    <input type="text" id="playerName" class="form-control text-center" placeholder="이름/닉네임 입력 (인증서용)" maxlength="8">
                </div>
                
                <button class="btn btn-primary mb-4 w-100" style="max-width: 300px;" onclick="generateCertificate()">📜 인증서 만들기</button>
                <button class="btn btn-outline-light w-100" style="max-width: 300px;" onclick="resetGame()">🔄 다시 하기</button>
            </div>

            <div id="certUI" class="hidden w-100 d-flex flex-column align-items-center">
                <img id="cert-preview" alt="인증서 미리보기">
                <a id="downloadLink" class="btn btn-success mt-2 w-100" style="max-width: 300px;" download="egg_certificate.png">💾 이미지 저장하기</a>
                <button class="btn btn-outline-light mt-4 w-100" style="max-width: 300px;" onclick="resetGame()">🔄 다시 하기</button>
            </div>
            
            <!-- Hidden canvas for certificate generation -->
            <canvas id="certCanvas" style="display:none;"></canvas>
        </div>
    </div>

    
    <!-- Game Config -->
    <script src="config.js"></script>
    <!-- Game Logic -->
    <script src="game.js"></script>
</body>
</html>